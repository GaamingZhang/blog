---
date: 2025-07-01
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 双指针
---

# 11. 盛最多水的容器

给定一个长度为 n 的整数数组 height 。有 n 条垂线，第 i 条线的两个端点是 (i, 0) 和 (i, height[i]) 。

找出其中的两条线，使得它们与 x 轴共同构成的容器可以容纳最多的水。

返回容器可以储存的最大水量。

说明：你不能倾斜容器。

示例 1：
输入：[1,8,6,2,5,4,8,3,7]
输出：49 
解释：图中垂直线代表输入数组 [1,8,6,2,5,4,8,3,7]。在此情况下，容器能够容纳水（表示为蓝色部分）的最大值为 49。

示例 2：
输入：height = [1,1]
输出：1

## 解题思路

这道题的核心是找到两个垂线，使它们与 x 轴构成的容器能容纳最多的水。

### 关键洞察

容器的容量由两个因素决定：
1. **宽度**：两条垂线之间的距离（索引差）
2. **高度**：两条垂线中较短的那条（木桶效应）

公式为：`面积 = min(height[i], height[j]) × (j - i)`

### 双指针法原理

使用双指针从数组两端向中间收缩：

1. 初始化左指针在数组起始位置，右指针在数组末尾
2. 计算当前容器容量并更新最大值
3. 移动较短边的指针向中间靠拢

**为什么移动较短边？**

假设 `height[left] < height[right]`：
- 如果移动 right 指针，宽度减小，高度受限于 `height[left]`，面积必然减小
- 如果移动 left 指针，宽度减小，但高度可能增加（如果新的 `height[left]` 更大），面积可能增大

因此，只有移动较短边的指针才有可能找到更大的面积。

### 优化：跳过无效位置

在移动指针时，可以跳过那些不可能产生更大面积的位置。如果新位置的高度不大于当前较短边的高度，那么面积必然减小（宽度变小，高度不变或变小），可以直接跳过。

## 代码实现

```cpp
class Solution {
public:
    int maxArea(vector<int>& height) {
        int start = 0;
        int end = height.size() - 1;
        int result = 0;
        
        while (start < end) {
            // 计算当前容器容量：宽度 × 高度（取较短的边）
            result = max(result, (end - start) * min(height[start], height[end]));
            
            // 移动较短边的指针
            if (height[start] <= height[end]) {
                // 跳过不可能产生更大面积的位置
                int tmp = start;
                while (tmp < end && height[tmp] <= height[start]) {
                    ++tmp;
                }
                start = tmp;
            } else {
                // 跳过不可能产生更大面积的位置
                int tmp = end;
                while (tmp > start && height[tmp] <= height[end]) {
                    --tmp;
                }
                end = tmp;
            }
        }
        
        return result;
    }
};
```

## 复杂度分析

- **时间复杂度**：O(n)，其中 n 是数组长度。每个元素最多被访问一次。
- **空间复杂度**：O(1)，只使用了常数级别的额外空间。

## 总结

本题使用双指针法的核心在于：**每次移动较短边的指针，才有可能找到更大的面积**。通过跳过无效位置的优化，可以减少不必要的计算，但整体时间复杂度仍为 O(n)。

这道题是双指针技巧的经典应用，理解"移动较短边"的原理是解题关键。
