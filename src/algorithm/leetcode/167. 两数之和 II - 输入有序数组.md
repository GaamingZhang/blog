---
date: 2025-08-05
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 双指针
---

# 167. 两数之和 II - 输入有序数组

给你一个下标从 1 开始的整数数组 numbers ，该数组已按 非递减顺序排列  ，请你从数组中找出满足
 相加之和等于目标数 target 的两个数。如果设这两个数分别是 numbers[index1] 和 numbers[index2] ，
 则 1 <= index1 < index2 <= numbers.length 。
以长度为 2 的整数数组 [index1, index2] 的形式返回这两个整数的下标 index1 和 index2。
你可以假设每个输入 只对应唯一的答案 ，而且你 不可以 重复使用相同的元素。
你所设计的解决方案必须只使用常量级的额外空间。

示例 1：
输入：numbers = [2,7,11,15], target = 9
输出：[1,2]
解释：2 与 7 之和等于目标数 9 。因此 index1 = 1, index2 = 2 。返回 [1, 2] 。

示例 2：
输入：numbers = [2,3,4], target = 6
输出：[1,3]
解释：2 与 4 之和等于目标数 6 。因此 index1 = 1, index2 = 3 。返回 [1, 3] 。

示例 3：
输入：numbers = [-1,0], target = -1
输出：[1,2]
解释：-1 与 0 之和等于目标数 -1 。因此 index1 = 1, index2 = 2 。返回 [1, 2] 。

## 解题思路

这道题是两数之和的变种，数组已经有序，可以利用这个特性优化解法。

### 双指针法

利用数组有序的特性，使用双指针从两端向中间遍历：

1. 左指针从数组开头开始
2. 右指针从数组末尾开始
3. 计算两指针指向元素的和
4. 根据和与 target 的关系移动指针

### 移动策略

- 如果 sum == target，找到答案
- 如果 sum < target，左指针右移（增大 sum）
- 如果 sum > target，右指针左移（减小 sum）

### 为什么双指针有效？

因为数组有序：
- 如果当前和小于 target，左指针右移可以增大和
- 如果当前和大于 target，右指针左移可以减小和
- 每次移动都能缩小搜索范围

## 代码实现

```cpp
class Solution {
public:
    vector<int> twoSum(vector<int>& numbers, int target) {
        int left = 0;
        int right = numbers.size() - 1;
        
        while (left < right) {
            int sum = numbers[left] + numbers[right];
            
            if (sum == target) {
                // 找到答案，返回下标（从 1 开始）
                return {left + 1, right + 1};
            } else if (sum < target) {
                // 和太小，左指针右移
                ++left;
            } else {
                // 和太大，右指针左移
                --right;
            }
        }
        
        // 题目保证有解，这行不会执行
        return {-1, -1};
    }
};
```

## 复杂度分析

- **时间复杂度**：O(n)，其中 n 是数组长度。最多遍历 n 次。
- **空间复杂度**：O(1)，只使用了两个指针的额外空间。

## 总结

本题使用**双指针法**解决有序数组的两数之和问题。关键在于：

1. **利用有序性**：数组有序是使用双指针的前提
2. **两端逼近**：从两端向中间遍历，逐步缩小范围
3. **O(1) 空间**：不需要哈希表，空间复杂度最优

与第 1 题两数之和的区别：
- 第 1 题：数组无序，使用哈希表
- 第 167 题：数组有序，使用双指针
