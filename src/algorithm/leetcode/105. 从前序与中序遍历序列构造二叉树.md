---
date: 2025-10-12
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 树
---

# 105. 从前序与中序遍历序列构造二叉树

给定两个整数数组 preorder 和 inorder ，其中 preorder 是二叉树的先序遍历， inorder 是同一棵树的
 中序遍历，请构造二叉树并返回其根节点。

示例 1:
输入: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
输出: [3,9,20,null,null,15,7]

示例 2:
输入: preorder = [-1], inorder = [-1]
输出: [-1]

```cpp
class Solution {
public:
    TreeNode* buildTree(vector<int>& preorder, vector<int>& inorder) {
        return buildTree(preorder, 0, preorder.size() - 1, inorder, 0, inorder.size() - 1);
    }

    TreeNode* buildTree(vector<int>& preorder, int preorderStart, int preorderEnd,
        vector<int>& inorder, int inorderStart, int inorderEnd) {
        if (preorderStart > preorderEnd || inorderStart > inorderEnd) {
            return nullptr;
        }
        int targetValue = preorder[preorderStart];
        int inorderIndex = inorderStart;
        while (inorder[inorderIndex] != targetValue && inorderIndex <= inorderEnd) {
            ++inorderIndex;
        }
        TreeNode* targetNode = new TreeNode(targetValue);
        targetNode->left = buildTree(preorder,
            preorderStart + 1,
            preorderStart + inorderIndex - inorderStart,
            inorder,
            inorderStart,
            inorderIndex - 1);
        targetNode->right = buildTree(preorder,
            preorderStart + 1 + inorderIndex - inorderStart,
            preorderEnd,
            inorder,
            inorderIndex + 1,
            inorderEnd);
        return targetNode;
    }
};
```
