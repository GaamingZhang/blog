---
date: 2025-07-18
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 字符串
---

# 12. 整数转罗马数字

七个不同的符号代表罗马数字，其值如下：

符号	值
I	1
V	5
X	10
L	50
C	100
D	500
M	1000
罗马数字是通过添加从最高到最低的小数位值的转换而形成的。将小数位值转换为罗马数字有以下规则：
如果该值不是以 4 或 9 开头，请选择可以从输入中减去的最大值的符号，将该符号附加到结果，减去其值，然后将其余部分转换为罗马数字。
如果该值以 4 或 9 开头，使用 减法形式，表示从以下符号中减去一个符号，例如 4 是 5 (V) 减 1 (I): IV ， 9 是 10 (X) 减 1 (I)：IX。仅使用以下减法形式：4 (IV)，9 (IX)，40 (XL)，90 (XC)， 400 (CD) 和 900 (CM)。
只有 10 的次方（I, X, C, M）最多可以连续附加 3 次以代表 10 的倍数。你不能多次附加 5 (V)， 50 (L) 或 500 (D)。如果需要将符号附加4次，请使用 减法形式。
给定一个整数，将其转换为罗马数字。

## 解题思路

这道题需要将整数转换为罗马数字。关键在于理解罗马数字的构造规则。

### 罗马数字规则

1. **基本符号**：I(1)、V(5)、X(10)、L(50)、C(100)、D(500)、M(1000)
2. **加法规则**：相同符号可以叠加，如 III = 3
3. **减法规则**：小符号在大符号前面表示相减，如 IV = 4、IX = 9
4. **限制**：减法形式仅限于 4、9、40、90、400、900

### 转换策略

按位处理，从高位到低位依次转换：
1. 千位：只能用 M 表示，最多 3 个（因为输入范围 1-3999）
2. 百位：使用 C、D、M 及其组合
3. 十位：使用 X、L、C 及其组合
4. 个位：使用 I、V、X 及其组合

对于每一位，根据数值（0-9）选择对应的罗马数字组合：
- 1-3：重复小符号（如 III）
- 4：减法形式（如 IV）
- 5：中间符号（如 V）
- 6-8：中间符号 + 重复小符号（如 VIII）
- 9：减法形式（如 IX）

## 代码实现

```cpp
class Solution {
public:
    string intToRoman(int num) {
        string result;
        
        // 处理千位：只能用 M 表示
        int x = num / 1000;
        num = num % 1000;
        if (x) {
            for (int i = 0; i < x; i++) {
                result += "M";
            }
        }
        
        // 处理百位：使用 C、D、M
        if (num / 100) {
            result += convertDigit("C", "D", "M", num / 100);
            num = num % 100;
        }
        
        // 处理十位：使用 X、L、C
        if (num / 10) {
            result += convertDigit("X", "L", "C", num / 10);
            num = num % 10;
        }
        
        // 处理个位：使用 I、V、X
        if (num) {
            result += convertDigit("I", "V", "X", num);
        }
        
        return result;
    }

private:
    // 将单个数字转换为罗马数字
    // one: 当前位的单位符号（如 I、X、C）
    // five: 当前位的五倍符号（如 V、L、D）
    // ten: 当前位的十倍符号（如 X、C、M）
    // digit: 要转换的数字（1-9）
    string convertDigit(string one, string five, string ten, int digit) {
        string result;
        if (digit == 4) {
            // 减法形式：4 = 5 - 1
            result += one + five;
        } else if (digit == 9) {
            // 减法形式：9 = 10 - 1
            result += one + ten;
        } else if (digit == 5) {
            // 刚好是五倍
            result += five;
        } else if (digit < 4) {
            // 1-3：重复单位符号
            for (int i = 0; i < digit; i++) {
                result += one;
            }
        } else {
            // 6-8：五倍符号 + 重复单位符号
            result += five;
            for (int i = 0; i < digit - 5; ++i) {
                result += one;
            }
        }
        return result;
    }
};
```

## 复杂度分析

- **时间复杂度**：O(1)，因为输入范围固定（1-3999），循环次数有上限。
- **空间复杂度**：O(1)，结果字符串长度有上限。

## 总结

本题的核心是**按位处理**，将整数分解为千、百、十、个位，然后根据每位数字选择对应的罗马数字组合。关键在于正确处理 4 和 9 的减法形式。

这种按位处理的方法思路清晰，代码结构简洁，便于理解和维护。
