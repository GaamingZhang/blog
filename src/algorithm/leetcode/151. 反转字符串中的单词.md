---
date: 2025-11-09
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 字符串
---

# 151. 反转字符串中的单词

给你一个字符串 s ，请你反转字符串中 单词 的顺序。
单词 是由非空格字符组成的字符串。s 中使用至少一个空格将字符串中的 单词 分隔开。
返回 单词 顺序颠倒且 单词 之间用单个空格连接的结果字符串。

注意：输入字符串 s中可能会存在前导空格、尾随空格或者单词间的多个空格。返回的结果字符串中，
 单词间应当仅用单个空格分隔，且不包含任何额外的空格。

示例 1：
输入：s = "the sky is blue"
输出："blue is sky the"

示例 2：
输入：s = "  hello world  "
输出："world hello"
解释：反转后的字符串中不能存在前导空格和尾随空格。

示例 3：
输入：s = "a good   example"
输出："example good a"
解释：如果两个单词间有多余的空格，反转后的字符串需要将单词间的空格减少到仅有一个。

## 解题思路

这道题需要反转字符串中单词的顺序，同时处理多余空格。

### 从右向左遍历

从字符串末尾向左遍历，逐个提取单词：

1. 跳过尾部空格
2. 找到单词的结束位置
3. 向左找到单词的开始位置
4. 提取单词，添加到结果中
5. 重复以上步骤

### 算法流程

1. 从字符串末尾开始遍历
2. 跳过空格，找到单词的结束位置 end
3. 从 end 向左遍历，找到单词的开始位置 start
4. 提取单词 s[start:end+1]，添加到结果中
5. 继续向左遍历，处理下一个单词

### 示例分析

`"the sky is blue"`：
1. end = 14，找到 "blue"，start = 11，结果 = "blue"
2. end = 9，找到 "is"，start = 8，结果 = "blue is"
3. end = 6，找到 "sky"，start = 4，结果 = "blue is sky"
4. end = 2，找到 "the"，start = 0，结果 = "blue is sky the"

## 代码实现

```cpp
class Solution {
public:
    string reverseWords(string s) {
        string result;
        int end = s.size() - 1;
        
        // 从右向左遍历
        while (end >= 0) {
            // 跳过空格
            while (end >= 0 && s[end] == ' ') {
                --end;
            }
            
            // 找到单词的结束位置 end
            // 向左找到单词的开始位置 start
            int start = end;
            while (start - 1 >= 0 && s[start - 1] != ' ') {
                --start;
            }
            
            // 如果找到有效单词
            if (start >= 0 && end >= start) {
                // 如果不是第一个单词，添加空格
                if (!result.empty()) {
                    result += " ";
                }
                // 添加单词
                result += s.substr(start, end - start + 1);
            }
            
            // 继续向左遍历
            end = start - 1;
        }
        
        return result;
    }
};
```

## 复杂度分析

- **时间复杂度**：O(n)，其中 n 是字符串长度。只需遍历一次字符串。
- **空间复杂度**：O(n)，存储结果字符串。如果不考虑输出空间，可以优化为 O(1)。

## 总结

本题使用**从右向左遍历**的方法反转单词顺序。关键在于：

1. **从右向左**：自然实现单词顺序的反转
2. **跳过空格**：处理多余空格
3. **单词提取**：使用 substr 提取单词

进阶解法：可以先反转整个字符串，再反转每个单词，最后去除多余空格，实现 O(1) 空间复杂度。
