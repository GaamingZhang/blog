---
date: 2025-08-27
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 链表
---

# 148. 排序链表

给你链表的头结点 head ，请将其按 升序 排列并返回 排序后的链表。

示例 1：
输入：head = [4,2,1,3]
输出：[1,2,3,4]

```cpp
class Solution {
public:
    ListNode* sortList(ListNode* head) {
        return sortListInternal(head);
    }

private:
    ListNode* sortListInternal(ListNode* head) {
        if (head == nullptr) {
            return nullptr;
        }
        int count = 0;
        ListNode* tmp = head;
        while (tmp != nullptr) {
            ++count;
            tmp = tmp->next;
        }
        if (count == 1) {
            return head;
        } else {
            count /= 2;
            ListNode* prev = nullptr;
            tmp = head;
            while (count > 0) {
                --count;
                prev = tmp;
                tmp = tmp->next;
            }
            prev->next = nullptr;
            ListNode* left = sortList(head);
            ListNode* right = sortList(tmp);
            return merge(left, right);
        }
    }

    ListNode* merge(ListNode* l, ListNode* r) {
        if (l == nullptr || r == nullptr) {
            return l == nullptr ? r : l;
        }
        if (l->val < r->val) {
            l->next = merge(l->next, r);
            return l;
        } else {
            r->next = merge(l, r->next);
            return r;
        }
    }
};
