---
date: 2025-11-09
author: Gaaming Zhang
isOriginal: true
article: true
category: leetcode
tag:
  - leetcode
  - 深度优先搜索
---

# 130. 被围绕的区域

给你一个 m x n 的矩阵 board ，由若干字符 'X' 和 'O' 组成，捕获 所有 被围绕的区域：
连接：一个单元格与水平或垂直方向上相邻的单元格连接。
区域：连接所有 'O' 的单元格来形成一个区域。
围绕：如果您可以用 'X' 单元格 连接这个区域，并且区域中没有任何单元格位于 board 边缘，
 则该区域被 'X' 单元格围绕。
通过 原地 将输入矩阵中的所有 'O' 替换为 'X' 来 捕获被围绕的区域。你不需要返回任何值。

```cpp
class Solution {
public:
    void solve(vector<vector<char>>& board) {
        int n = board.size();
        int m = board[0].size();
        vector<vector<bool>> visited(n, vector<bool>(m, false));
        for (int i = 0; i < n; ++i) {
            if (!visited[i][0] && board[i][0] == 'O') {
                dfs(board, visited, i, 0, n, m);
            }
            if (!visited[i][m - 1] && board[i][m - 1] == 'O') {
                dfs(board, visited, i, m - 1, n, m);
            }
        }
        for (int i = 0; i < m; ++i) {
            if (!visited[0][i] && board[0][i] == 'O') {
                dfs(board, visited, 0, i, n, m);
            }
            if (!visited[n - 1][i] && board[n - 1][i] == 'O') {
                dfs(board, visited, n - 1, i, n, m);
            }
        }

        for (int x = 0; x < n; ++x) {
            for (int y = 0; y < m; ++y) {
                if (board[x][y] == '#') {
                    board[x][y] = 'O';
                } else if (board[x][y] == 'O') {
                    board[x][y] = 'X';
                }
            }
        }
    }

private:
    vector<vector<int>> directions = {{0, 1}, {0, -1}, {-1, 0}, {1, 0}};

    void dfs(vector<vector<char>>& board, vector<vector<bool>>& visited,
        int x, int y, int n, int m) {
        visited[x][y] = true;
        board[x][y] = '#';
        for (int i = 0; i < 4; ++i) {
            int nextX = x + directions[i][0];
            int nextY = y + directions[i][1];
            if (nextX < 0 || nextY < 0 || nextX >= n || nextY >= m
                || visited[nextX][nextY] || board[nextX][nextY] != 'O') {
                continue;
            }
            dfs(board, visited, nextX, nextY, n, m);
        }
    }
};
```
