---
date: 2025-09-18
author: Gaaming Zhang
isOriginal: true
article: false
category: leetcode
tag:
  - leetcode
---

# 211. 添加与搜索单词 - 数据结构设计

请你设计一个数据结构，支持 添加新单词 和 查找字符串是否与任何先前添加的字符串匹配 。
bool search(word) 如果数据结构中存在字符串与 word 匹配，则返回 true ；否则，返回  false 。
 word 中可能包含一些 '.' ，每个 . 都可以表示任何一个字母。

```cpp
class TrieNode {
public:
    TrieNode() {
        nodes = vector<TrieNode*>(26, nullptr);
        isLeaf = false;
    }

    vector<TrieNode*> nodes;
    bool isLeaf;
};

class WordDictionary {
public:
    WordDictionary() {
        head = new TrieNode();
    }

    void addWord(string word) {
        TrieNode* tmp = head;

        for (int i = 0; i < word.size(); ++i) {
            int wordIndex = word[i] - 'a';
            if (tmp->nodes[wordIndex] == nullptr) {
                tmp->nodes[wordIndex] = new TrieNode();
            }
            tmp = tmp->nodes[wordIndex];
        }

        tmp->isLeaf = true;
    }

    bool search(string word) {
        return search(word, head);
    }

private:
    TrieNode* head;

    bool search(string word, TrieNode* node) {
        if (word.size() == 0) {
            if (node == nullptr) {
                return false;
            }
            return node->isLeaf;
        }

        TrieNode* tmp = node;

        for (int i = 0; i < word.size(); ++i) {
            if (word[i] == '.') {
                bool res = false;
                for (int j = 0; j < 26 && res == false; ++j) {
                    if (tmp->nodes[j] != nullptr) {
                        res |= search(word.substr(i + 1, word.size() - i - 1), tmp->nodes[j]);
                    }
                }
                return res;
            } else {
                int wordIndex = word[i] - 'a';
                if (tmp->nodes[wordIndex] == nullptr) {
                    return false;
                }
                tmp = tmp->nodes[wordIndex];
            }
        }

        return tmp->isLeaf;
    }
};
```
